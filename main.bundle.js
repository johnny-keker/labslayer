!function(e){function t(t){for(var o,s,a=t[0],c=t[1],p=t[2],h=0,d=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,p||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={0:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var p=0;p<a.length;p++)t(a[p]);var l=c;i.push([8,1]),n()}({4:function(e,t,n){var o=n(5),r=n(6);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};o(r,i);e.exports=r.locals||{}},6:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o)()(!1);r.push([e.i,"html, body {\r\n  overflow: hidden;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  justify-content: center;\r\n  display: flex;\r\n  /*background-color: black;*/\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n\r\n.controls {\r\n  color: white;\r\n  border-style: solid;\r\n  border-radius: 10px;\r\n  width: 30%;\r\n}\r\n\r\n.controls__slider {\r\n  display: inline-block;\r\n  margin: 3px;\r\n  margin-left: 11%;\r\n}\r\n\r\nimg {\r\n  position: fixed;\r\n  top: 0px;\r\n  left: 0px;\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: 99;\r\n}\r\n\r\ncanvas {\r\n  position: fixed;\r\n  top: 0px;\r\n  left: 0px;\r\n}\r\n\r\n.parent {\r\n  position: relative;\r\n}\r\n",""]),t.default=r},8:function(e,t,n){"use strict";n.r(t);n(4);var o=n(0);class r{constructor(e){const t=e.domElement.width/e.domElement.height;this.threeCamera=new o.j(60,t,.1,1500),this.threeCamera.position.set(0,10,0),this.updateSize(e),window.addEventListener("resize",()=>this.updateSize(e),!1)}updateSize(e){this.threeCamera.aspect=e.domElement.width/e.domElement.height,this.threeCamera.updateProjectionMatrix()}}class i{constructor(e,t){this.container=e,this.threeRenderer=new o.u({antialias:!0,canvas:t}),this.threeRenderer.outputEncoding=o.f,this.threeRenderer.setPixelRatio(window.devicePixelRatio),e.appendChild(this.threeRenderer.domElement),this.updateSize(),document.addEventListener("DOMContentLoaded",()=>this.updateSize(),!1),window.addEventListener("resize",()=>this.updateSize(),!1)}updateSize(){this.threeRenderer.setSize(window.innerWidth,window.innerHeight)}render(e,t){this.threeRenderer.render(e,t)}}let s=new o.i({color:10234131}),a=[{sX:150,sY:300,pX:0,pZ:-140},{sX:630,sY:90,pX:0,pZ:-335},{sX:90,sY:450,pX:-270,pZ:-605},{sX:90,sY:450,pX:270,pZ:-605},{sX:630,sY:90,pX:0,pZ:-875},{sX:150,sY:90,pX:-150,pZ:-605},{sX:150,sY:90,pX:150,pZ:-605},{sX:150,sY:150,pX:0,pZ:-605},{sX:150,sY:300,pX:0,pZ:-1070}];class c{constructor(){this.planes=[],a.forEach(e=>{var t=new o.h(new o.k(e.sX,e.sY,1,1),s);t.rotation.x=-Math.PI/2,t.position.y=-18,t.position.x+=e.pX,t.position.z+=e.pZ,this.planes.push(t)})}}var p=n.p+"img/964191b3c2711935491f0b16f17928cb.jpg";class l{constructor(e){let t=(new o.s).load(p);t.wrapS=o.n,t.wrapT=o.n,t.repeat.set(100,100);let n=new o.p({vertexShader:"\nuniform float uPhase;\n\n//varying vec2 vTexcoord;\n\nvoid main() {\n  vec4 pos = vec4(position, 1.0);\n  pos.z = 1.0 * sin(0.4 * pos.x + uPhase) * sin(0.4 * pos.y + uPhase);\n  //vTexcoord = vec2(round(pos.x) / 40.0, round(pos.y) / 40.0);\n  gl_Position = projectionMatrix * modelViewMatrix * pos;\n}",fragmentShader:"\n//varying vec2 vTexcoord;\n\n//uniform sampler2D uTexture;\n\nvoid main() {\n  //gl_FragColor = texture2D(uTexture, vTexcoord);\n  gl_FragColor = vec4(0.0, 0.7, 0.0, 1.0);\n}",uniforms:e}),r=new o.h(new o.k(540,540,100,100),n);r.geometry.vertices,r.rotation.x=-Math.PI/2,r.position.y=-20,r.position.z-=605,this.plane=r}}let h=new o.i({color:10234131}),d=[{sX:150,pX:0,pZ:10,r:Math.PI},{sX:300,pX:-75,pZ:-140,r:Math.PI/2},{sX:300,pX:75,pZ:-140,r:-Math.PI/2},{sX:240,pX:-195,pZ:-290,r:Math.PI},{sX:240,pX:195,pZ:-290,r:Math.PI},{sX:240,pX:-195,pZ:-290,r:Math.PI},{sX:630,pX:-315,pZ:-605,r:Math.PI/2},{sX:630,pX:315,pZ:-605,r:-Math.PI/2},{sX:240,pX:-195,pZ:-920,r:0},{sX:240,pX:195,pZ:-920,r:0},{sX:150,pX:0,pZ:-1220,r:0},{sX:300,pX:-75,pZ:-1070,r:Math.PI/2},{sX:300,pX:75,pZ:-1070,r:-Math.PI/2}];class u{constructor(){this.planes=[],d.forEach(e=>{var t=new o.h(new o.k(e.sX,70,1,1),h);t.rotation.y=e.r,t.position.x+=e.pX,t.position.z+=e.pZ,t.position.y=17,this.planes.push(t)})}}let m=new o.i({color:10234131}),w=[{sX:150,sY:1230,pX:0,pZ:-605},{sX:240,sY:630,pX:195,pZ:-605},{sX:240,sY:630,pX:-195,pZ:-605}];class f{constructor(){this.planes=[],w.forEach(e=>{var t=new o.h(new o.k(e.sX,e.sY,1,1),m);t.rotation.x=Math.PI/2,t.position.y=52,t.position.x+=e.pX,t.position.z+=e.pZ,this.planes.push(t)})}}new o.i({color:65280});let v=new o.i({color:10859945}),g=new o.i({color:1942335});class y{constructor(e,t,n,r,i,s){this.scene=n,this.timer=1.5,this.player=t,this.bullets=e,this.walls=s;var a=new o.h(new o.b(10,30),v);a.position.x=r,a.position.z=i,a.position.y=-10,n.add(a);var c=new o.h(new o.q(10,10),g);c.position.x=r,c.position.z=i,c.position.y=15,n.add(c),this.sphere=c;var p=new o.h(new o.b(10,30),v);p.rotation.x=Math.PI,p.position.x=r,p.position.z=i,p.position.y=40,n.add(p)}shoot(e){this.sphere.lookAt(e);let t=new o.m(this.sphere.position,this.sphere.getWorldDirection().normalize(),0,1200),n=new o.h(new o.q(1,1),v);n.position.set(e.x,e.y,e.z),n.updateMatrixWorld();let r=t.intersectObject(n)[0].distance;if(!(t.intersectObjects(this.walls)[0].distance<r)){var i=new o.h(new o.q(8,8),g);i.position.copy(this.sphere.position),i.lookAt(e),this.bullets.push(i),this.scene.add(i)}}update(e){this.timer-=e,this.timer<=0&&(this.shoot(this.player.position),this.timer=1.5)}}class b{constructor(e,t,n){this.floor=new c,this.floor.planes.forEach(t=>{e.add(t)}),this.roof=new f,this.roof.planes.forEach(t=>{e.add(t)}),e.add(new l(t).plane),this.walls=new u,this.walls.planes.forEach(t=>{e.add(t)}),this.bullets=[],this.enemies=[new y(this.bullets,n,e,270,-335,this.walls.planes)]}update(e){this.enemies.forEach(t=>{t.update(e)}),0!=this.bullets.length&&this.bullets.forEach(e=>{let t=new o.t;t.setFromMatrixColumn(e.matrix,0),t.crossVectors(new o.t(0,1,0),t),e.position.addScaledVector(t,-2)})}moveLevel(e,t){this.elements.forEach(n=>{n.position.x+=e,n.position.z+=t})}}n(3);class x{constructor(e,t){var n=new o.g(16711680,16711680,.5);n.color.setHSL(.6,1,.6),n.groundColor.setHSL(.095,.8,.5),n.position.set(0,30,0),e.add(n);var r=new o.c(16777215,.1);r.position.set(0,10,0),r.castShadow=!0,r.shadow.camera.near=1,r.shadow.camera.far=2,r.shadow.camera.left=-.1,r.shadow.camera.bottom=-.1,r.shadow.camera.right=.1,r.shadow.camera.top=.1,r.shadow.bias=1e-4,r.target.position.set(0,0,1),r.shadow.radius=.1;let i=new o.r(16777215,.5,150);i.power=12,i.angle=.6,i.decay=1,i.penumbra=.5,i.distance=2e3,t.add(i.target),i.target.position.set(0,0,-1),i.position.copy(t.position),e.add(i),this.spotLight=i,this.camera=t;let s=new o.l(1942335,3);s.distance=500,s.position.set(0,30,-605),s.castShadow=!0,e.add(s),this.pointLight=s;let a=new o.l(1942335,3);a.distance=500,a.position.set(0,30,-725),a.castShadow=!0,e.add(a),this.pointLight2=a}updateSpotlight(e){this.pointLight.intensity=1+5*Math.max(Math.sin(e/700),0),this.pointLight2.intensity=6-this.pointLight.intensity,this.spotLight.position.copy(this.camera.position)}}var X=n(1),k=function(e,t){void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI;var n,r=this,i={type:"change"},s={type:"lock"},a={type:"unlock"},c=new o.d(0,0,0,"YXZ"),p=Math.PI/2,l=new o.t;function h(t){if(!1!==r.isLocked){var n=t.movementX||t.mozMovementX||t.webkitMovementX||0,o=t.movementY||t.mozMovementY||t.webkitMovementY||0;c.setFromQuaternion(e.quaternion),c.y-=.002*n,c.x-=.002*o,c.x=Math.max(p-r.maxPolarAngle,Math.min(p-r.minPolarAngle,c.x)),e.quaternion.setFromEuler(c),r.dispatchEvent(i)}}function d(){r.domElement.ownerDocument.pointerLockElement===r.domElement?(r.dispatchEvent(s),r.isLocked=!0):(r.dispatchEvent(a),r.isLocked=!1)}function u(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){r.domElement.ownerDocument.addEventListener("mousemove",h,!1),r.domElement.ownerDocument.addEventListener("pointerlockchange",d,!1),r.domElement.ownerDocument.addEventListener("pointerlockerror",u,!1)},this.disconnect=function(){r.domElement.ownerDocument.removeEventListener("mousemove",h,!1),r.domElement.ownerDocument.removeEventListener("pointerlockchange",d,!1),r.domElement.ownerDocument.removeEventListener("pointerlockerror",u,!1)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=(n=new o.t(0,0,-1),function(t){return t.copy(n).applyQuaternion(e.quaternion)}),this.moveForward=function(t,n){l.setFromMatrixColumn(e.matrix,0),l.crossVectors(e.up,l);var r=new o.t;return r.copy(n),r.addScaledVector(l,t),r},this.moveRight=function(t){l.setFromMatrixColumn(e.matrix,0);var n=new o.t;return n.copy(e.position),n.addScaledVector(l,t),n},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){r.domElement.ownerDocument.exitPointerLock()},this.connect()};if((k.prototype=Object.create(o.e.prototype)).constructor=k,X.a.isWebGLAvailable())!function(){let e=document.body,t=new o.o;const n=document.createElement("CANVAS");document.body.appendChild(n);const s=document.createElement("img");s.src="../hud/HUD-1.png",e.appendChild(s);let a=new i(e,n);n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock;let c=new r(a.threeRenderer),p=new k(c.threeCamera,e);n.onclick=function(){p.lock()},s.onclick=function(){p.lock()},t.add(p.getObject());new o.t(0,0,-1);let l=new o.m(new o.t,new o.t(0,-1,0),0,30);new o.m(new o.t,new o.t(0,-1,0),0,1200);document.addEventListener("keydown",(function(e){switch(e.keyCode){case 38:case 87:E=!0;break;case 37:case 65:P=!0;break;case 40:case 83:L=!0;break;case 39:case 68:M=!0;break;case 32:!0===z&&(m.y+=200),z=!1}}),!1),document.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:case 87:E=!1;break;case 37:case 65:P=!1;break;case 40:case 83:L=!1;break;case 39:case 68:M=!1}}),!1);const h={uPhase:{value:0}},d=new b(t,h,c.threeCamera),u=new x(t,c.threeCamera);const m=new o.t,w=new o.t;let f=performance.now();!function e(){requestAnimationFrame(e),h.uPhase.value+=.1;const n=performance.now();if(!0===p.isLocked){const e=(n-f)/1e3;m.x-=7*m.x*e,m.z-=7*m.z*e,m.y-=9.8*100*e,w.z=Number(E)-Number(L),w.x=Number(M)-Number(P),w.normalize(),(E||L)&&(m.z-=400*w.z*e),(P||M)&&(m.x-=400*w.x*e);var o=c.threeCamera.position;let t;var r=c.threeCamera.position;r=p.moveRight(-m.x*e),l.ray.origin.copy(r),t=l.intersectObjects(d.floor.planes),0==t.length&&(r=o),o=r,r=p.moveForward(-m.z*e,r),l.ray.origin.copy(r),t=l.intersectObjects(d.floor.planes),0==t.length&&(r=o),p.getObject().position.set(r.x,r.y,r.z),p.getObject().position.y+=m.y*e,p.getObject().position.y<10&&(m.y=0,p.getObject().position.y=10,z=!0),d.update(e)}f=n,u.updateSpotlight(n),a.render(t,c.threeCamera)}()}();else{let e=X.a.getWebGLErrorMessage();document.body.appendChild(e)}let E=!1,P=!1,L=!1,M=!1,z=!0}});